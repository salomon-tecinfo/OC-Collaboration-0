(function(b){var a=function(F,k){var e=b.extend({},b.fn.nivoSlider.defaults,k);var x={currentSlide:0,currentImage:"",totalSlides:0,running:false,paused:false,stop:false,controlNavEl:false};var G=b(F);G.data("nivo:vars",x).addClass("nivoSlider");var j=G.children();j.each(function(){var c=b(this);var h="";if(!c.is("img")){if(c.is("a")){c.addClass("nivo-imageLink");h=c}c=c.find("img:first")}var f=f===0?c.attr("width"):c.width(),d=d===0?c.attr("height"):c.height();if(h!==""){h.css("display","none")}c.css("display","none");x.totalSlides++});if(e.randomStart){e.startSlide=Math.floor(Math.random()*x.totalSlides)}if(e.startSlide>0){if(e.startSlide>=x.totalSlides){e.startSlide=x.totalSlides-1}x.currentSlide=e.startSlide}if(b(j[x.currentSlide]).is("img")){x.currentImage=b(j[x.currentSlide])}else{x.currentImage=b(j[x.currentSlide]).find("img:first")}if(b(j[x.currentSlide]).is("a")){b(j[x.currentSlide]).css("display","block")}var E=b("<img/>").addClass("nivo-main-image");E.attr("src",x.currentImage.attr("src")).show();G.append(E);b(window).resize(function(){G.children("img").width(G.width());E.attr("src",x.currentImage.attr("src"));E.stop().height("auto");b(".nivo-slice").remove();b(".nivo-box").remove()});G.append(b('<div class="nivo-caption"></div>'));var C=function(c){var f=b(".nivo-caption",G);if(x.currentImage.attr("title")!=""&&x.currentImage.attr("title")!=undefined){var d=x.currentImage.attr("title");if(d.substr(0,1)=="#"){d=b(d).html()}if(f.css("display")=="block"){setTimeout(function(){f.html(d)},c.animSpeed)}else{f.html(d);f.stop().fadeIn(c.animSpeed)}}else{f.stop().fadeOut(c.animSpeed)}};C(e);var z=0;if(!e.manualAdvance&&j.length>1){z=setInterval(function(){A(G,j,e,false)},e.pauseTime)}if(e.directionNav){G.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+e.prevText+'</a><a class="nivo-nextNav">'+e.nextText+"</a></div>");b(G).on("click","a.nivo-prevNav",function(){if(x.running){return false}clearInterval(z);z="";x.currentSlide-=2;A(G,j,e,"prev")});b(G).on("click","a.nivo-nextNav",function(){if(x.running){return false}clearInterval(z);z="";A(G,j,e,"next")})}if(e.controlNav){x.controlNavEl=b('<div class="nivo-controlNav"></div>');G.after(x.controlNavEl);for(var w=0;w<j.length;w++){if(e.controlNavThumbs){x.controlNavEl.addClass("nivo-thumbs-enabled");var B=j.eq(w);if(!B.is("img")){B=B.find("img:first")}if(B.attr("data-thumb")){x.controlNavEl.append('<a class="nivo-control" rel="'+w+'"><img src="'+B.attr("data-thumb")+'" alt="" /></a>')}}else{x.controlNavEl.append('<a class="nivo-control" rel="'+w+'">'+(w+1)+"</a>")}}b("a:eq("+x.currentSlide+")",x.controlNavEl).addClass("active");b("a",x.controlNavEl).bind("click",function(){if(x.running){return false}if(b(this).hasClass("active")){return false}clearInterval(z);z="";E.attr("src",x.currentImage.attr("src"));x.currentSlide=b(this).attr("rel")-1;A(G,j,e,"control")})}if(e.pauseOnHover){G.hover(function(){x.paused=true;clearInterval(z);z=""},function(){x.paused=false;if(z===""&&!e.manualAdvance){z=setInterval(function(){A(G,j,e,false)},e.pauseTime)}})}G.bind("nivo:animFinished",function(){E.attr("src",x.currentImage.attr("src"));x.running=false;b(j).each(function(){if(b(this).is("a")){b(this).css("display","none")}});if(b(j[x.currentSlide]).is("a")){b(j[x.currentSlide]).css("display","block")}if(z===""&&!x.paused&&!e.manualAdvance){z=setInterval(function(){A(G,j,e,false)},e.pauseTime)}e.afterChange.call(this)});var y=function(d,m,h){if(b(h.currentImage).parent().is("a")){b(h.currentImage).parent().css("display","block")}b('img[src="'+h.currentImage.attr("src")+'"]',d).not(".nivo-main-image,.nivo-control img").width(d.width()).css("visibility","hidden").show();var c=b('img[src="'+h.currentImage.attr("src")+'"]',d).not(".nivo-main-image,.nivo-control img").parent().is("a")?b('img[src="'+h.currentImage.attr("src")+'"]',d).not(".nivo-main-image,.nivo-control img").parent().height():b('img[src="'+h.currentImage.attr("src")+'"]',d).not(".nivo-main-image,.nivo-control img").height();for(var f=0;f<m.slices;f++){var l=Math.round(d.width()/m.slices);if(f===m.slices-1){d.append(b('<div class="nivo-slice" name="'+f+'"><img src="'+h.currentImage.attr("src")+'" style="position:absolute; width:'+d.width()+"px; height:auto; display:block !important; top:0; left:-"+(l+f*l-l)+'px;" /></div>').css({left:l*f+"px",width:d.width()-l*f+"px",height:c+"px",opacity:"0",overflow:"hidden"}))}else{d.append(b('<div class="nivo-slice" name="'+f+'"><img src="'+h.currentImage.attr("src")+'" style="position:absolute; width:'+d.width()+"px; height:auto; display:block !important; top:0; left:-"+(l+f*l-l)+'px;" /></div>').css({left:l*f+"px",width:l+"px",height:c+"px",opacity:"0",overflow:"hidden"}))}}b(".nivo-slice",d).height(c);E.stop().animate({height:b(h.currentImage).height()},m.animSpeed)};var g=function(f,p,l){if(b(l.currentImage).parent().is("a")){b(l.currentImage).parent().css("display","block")}b('img[src="'+l.currentImage.attr("src")+'"]',f).not(".nivo-main-image,.nivo-control img").width(f.width()).css("visibility","hidden").show();var d=Math.round(f.width()/p.boxCols),h=Math.round(b('img[src="'+l.currentImage.attr("src")+'"]',f).not(".nivo-main-image,.nivo-control img").height()/p.boxRows);for(var m=0;m<p.boxRows;m++){for(var c=0;c<p.boxCols;c++){if(c===p.boxCols-1){f.append(b('<div class="nivo-box" name="'+c+'" rel="'+m+'"><img src="'+l.currentImage.attr("src")+'" style="position:absolute; width:'+f.width()+"px; height:auto; display:block; top:-"+h*m+"px; left:-"+d*c+'px;" /></div>').css({opacity:0,left:d*c+"px",top:h*m+"px",width:f.width()-d*c+"px"}));b('.nivo-box[name="'+c+'"]',f).height(b('.nivo-box[name="'+c+'"] img',f).height()+"px")}else{f.append(b('<div class="nivo-box" name="'+c+'" rel="'+m+'"><img src="'+l.currentImage.attr("src")+'" style="position:absolute; width:'+f.width()+"px; height:auto; display:block; top:-"+h*m+"px; left:-"+d*c+'px;" /></div>').css({opacity:0,left:d*c+"px",top:h*m+"px",width:d+"px"}));b('.nivo-box[name="'+c+'"]',f).height(b('.nivo-box[name="'+c+'"] img',f).height()+"px")}}}E.stop().animate({height:b(l.currentImage).height()},p.animSpeed)};var A=function(K,P,M,U){var L=K.data("nivo:vars");if(L&&L.currentSlide===L.totalSlides-1){M.lastSlide.call(this)}if((!L||L.stop)&&!U){return false}M.beforeChange.call(this);if(!U){E.attr("src",L.currentImage.attr("src"))}else{if(U==="prev"){E.attr("src",L.currentImage.attr("src"))}if(U==="next"){E.attr("src",L.currentImage.attr("src"))}}L.currentSlide++;if(L.currentSlide===L.totalSlides){L.currentSlide=0;M.slideshowEnd.call(this)}if(L.currentSlide<0){L.currentSlide=L.totalSlides-1}if(b(P[L.currentSlide]).is("img")){L.currentImage=b(P[L.currentSlide])}else{L.currentImage=b(P[L.currentSlide]).find("img:first")}if(M.controlNav){b("a",L.controlNavEl).removeClass("active");b("a:eq("+L.currentSlide+")",L.controlNavEl).addClass("active")}C(M);b(".nivo-slice",K).remove();b(".nivo-box",K).remove();var O=M.effect,W="";if(M.effect==="random"){W=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse");O=W[Math.floor(Math.random()*(W.length+1))];if(O===undefined){O="fade"}}if(M.effect.indexOf(",")!==-1){W=M.effect.split(",");O=W[Math.floor(Math.random()*W.length)];if(O===undefined){O="fade"}}if(L.currentImage.attr("data-transition")){O=L.currentImage.attr("data-transition")}L.running=true;var R=0,Y=0,X="",Q="",V="",v="";if(O==="sliceDown"||O==="sliceDownRight"||O==="sliceDownLeft"){y(K,M,L);R=0;Y=0;X=b(".nivo-slice",K);if(O==="sliceDownLeft"){X=b(".nivo-slice",K)._reverse()}X.each(function(){var c=b(this);c.css({top:"0px"});if(Y===M.slices-1){setTimeout(function(){c.animate({opacity:"1.0"},M.animSpeed,"",function(){K.trigger("nivo:animFinished")})},100+R)}else{setTimeout(function(){c.animate({opacity:"1.0"},M.animSpeed)},100+R)}R+=50;Y++})}else{if(O==="sliceUp"||O==="sliceUpRight"||O==="sliceUpLeft"){y(K,M,L);R=0;Y=0;X=b(".nivo-slice",K);if(O==="sliceUpLeft"){X=b(".nivo-slice",K)._reverse()}X.each(function(){var c=b(this);c.css({bottom:"0px"});if(Y===M.slices-1){setTimeout(function(){c.animate({opacity:"1.0"},M.animSpeed,"",function(){K.trigger("nivo:animFinished")})},100+R)}else{setTimeout(function(){c.animate({opacity:"1.0"},M.animSpeed)},100+R)}R+=50;Y++})}else{if(O==="sliceUpDown"||O==="sliceUpDownRight"||O==="sliceUpDownLeft"){y(K,M,L);R=0;Y=0;var Z=0;X=b(".nivo-slice",K);if(O==="sliceUpDownLeft"){X=b(".nivo-slice",K)._reverse()}X.each(function(){var c=b(this);if(Y===0){c.css("top","0px");Y++}else{c.css("bottom","0px");Y=0}if(Z===M.slices-1){setTimeout(function(){c.animate({opacity:"1.0"},M.animSpeed,"",function(){K.trigger("nivo:animFinished")})},100+R)}else{setTimeout(function(){c.animate({opacity:"1.0"},M.animSpeed)},100+R)}R+=50;Z++})}else{if(O==="fold"){y(K,M,L);R=0;Y=0;b(".nivo-slice",K).each(function(){var d=b(this);var c=d.width();d.css({top:"0px",width:"0px"});if(Y===M.slices-1){setTimeout(function(){d.animate({width:c,opacity:"1.0"},M.animSpeed,"",function(){K.trigger("nivo:animFinished")})},100+R)}else{setTimeout(function(){d.animate({width:c,opacity:"1.0"},M.animSpeed)},100+R)}R+=50;Y++})}else{if(O==="fade"){y(K,M,L);Q=b(".nivo-slice:first",K);Q.css({width:K.width()+"px"});Q.animate({opacity:"1.0"},M.animSpeed*2,"",function(){K.trigger("nivo:animFinished")})}else{if(O==="slideInRight"){y(K,M,L);Q=b(".nivo-slice:first",K);Q.css({width:"0px",opacity:"1"});Q.animate({width:K.width()+"px"},M.animSpeed*2,"",function(){K.trigger("nivo:animFinished")})}else{if(O==="slideInLeft"){y(K,M,L);Q=b(".nivo-slice:first",K);Q.css({width:"0px",opacity:"1",left:"",right:"0px"});Q.animate({width:K.width()+"px"},M.animSpeed*2,"",function(){Q.css({left:"0px",right:""});K.trigger("nivo:animFinished")})}else{if(O==="boxRandom"){g(K,M,L);V=M.boxCols*M.boxRows;Y=0;R=0;v=D(b(".nivo-box",K));v.each(function(){var c=b(this);if(Y===V-1){setTimeout(function(){c.animate({opacity:"1"},M.animSpeed,"",function(){K.trigger("nivo:animFinished")})},100+R)}else{setTimeout(function(){c.animate({opacity:"1"},M.animSpeed)},100+R)}R+=20;Y++})}else{if(O==="boxRain"||O==="boxRainReverse"||O==="boxRainGrow"||O==="boxRainGrowReverse"){g(K,M,L);V=M.boxCols*M.boxRows;Y=0;R=0;var I=0;var J=0;var p=[];p[I]=[];v=b(".nivo-box",K);if(O==="boxRainReverse"||O==="boxRainGrowReverse"){v=b(".nivo-box",K)._reverse()}v.each(function(){p[I][J]=b(this);J++;if(J===M.boxCols){I++;J=0;p[I]=[]}});for(var H=0;H<M.boxCols*2;H++){var h=H;for(var u=0;u<M.boxRows;u++){if(h>=0&&h<M.boxCols){(function(T,r,t,o,m){var N=b(p[T][r]);var d=N.width();var S=N.height();if(O==="boxRainGrow"||O==="boxRainGrowReverse"){N.width(0).height(0)}if(o===m-1){setTimeout(function(){N.animate({opacity:"1",width:d,height:S},M.animSpeed/1.3,"",function(){K.trigger("nivo:animFinished")})},100+t)}else{setTimeout(function(){N.animate({opacity:"1",width:d,height:S},M.animSpeed/1.3)},100+t)}})(u,h,R,Y,V);Y++}h--}R+=100}}}}}}}}}}};var D=function(f){for(var c,h,d=f.length;d;c=parseInt(Math.random()*d,10),h=f[--d],f[d]=f[c],f[c]=h){}return f};var q=function(c){if(this.console&&typeof console.log!=="undefined"){console.log(c)}};this.stop=function(){if(!b(F).data("nivo:vars").stop){b(F).data("nivo:vars").stop=true;q("Stop Slider")}};this.start=function(){if(b(F).data("nivo:vars").stop){b(F).data("nivo:vars").stop=false;q("Start Slider")}};e.afterLoad.call(this);return this};b.fn.nivoSlider=function(c){return this.each(function(f,d){var e=b(this);if(e.data("nivoslider")){return e.data("nivoslider")}var g=new a(this,c);e.data("nivoslider",g)})};b.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,controlNav:true,controlNavThumbs:false,pauseOnHover:true,manualAdvance:false,prevText:"Prev",nextText:"Next",randomStart:false,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};b.fn._reverse=[].reverse})(jQuery);